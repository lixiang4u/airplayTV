{{ define "home/info.html" }}
    <!doctype html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Home</title>
        <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.css" rel="stylesheet">

        <style type="text/css">
            body {
                background-color: rgb(223, 239, 221);
            }

            .navbar-header span {
                /*width: 100px;*/
                margin-top: 19px;
                font-size: 12px;
                display: inline-block;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                color: whitesmoke;
                /*line-height: 50px;*/
            }

            .h20 {
                width: 100%;
                height: 20px;
                clear: both;
            }

            .video-info .thumb {
                width: 80%;
                margin: 0 auto;
                display: block;
            }

            .video-info .name {
                font-size: 18px;
                font-weight: bold;
                margin-top: 18px;
            }

            .video-info .intro {
                line-height: 180%;
            }

            .video-info .play-list {
                margin: 5px 0 5px 0;
            }

            .video-info .play-list .item {
                background-color: #0c81e8;
                padding: 8px 12px;
                margin: 7px;
                display: inline-block;
                margin-left: 0;
                border-radius: 5px;
                color: #c8dde6;
                text-align: center;
                font-size: 14px;
            }

        </style>
    </head>
    <body>

    <div class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand hidden-sm" href="/">ShotTV</a>
                {{ if .tv_id }}
                    <span>ID: {{ .tv_id }}</span>
                {{ else }}
                    <span>请先扫码关联TV</span>
                {{ end}}
            </div>
        </div>
    </div>

    <div class="container video-info">
        <img class="thumb" src="{{ .data.Thumb }}" alt="{{ .data.Name }}">
        <div class="container">
            <p class="name">{{ .data.Name }}</p>
            <div class="play-list">
                {{ range .data.Links }}
                    <span class="item" data-id="{{ .Id }}">{{ .Name }}</span>
                {{ end }}
            </div>
            <p class="intro"><b>介绍：</b>{{ .data.Intro }}</p>
        </div>
    </div>

    <div class="h20"></div>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $('.play-list .item').on('click', function (element) {
                if ("{{ .tv_id }}" == "") {
                    alert('请先扫码关联TV后在播放');
                    return false;
                }
                let id = $(this).attr('data-id');
                $.ajax({
                    type: 'post',
                    url: '/api/play',
                    data: {
                        client_id: '{{ .tv_id }}',
                        id: id
                    },
                    dataType: 'json',
                    success: function (data) {
                        alert('已经发送播放信息到TV，请稍等');
                        console.log(data);
                    },
                    error: function (a, b, c) {
                        alert('网络异常');
                        console.log(a, b, c);
                    }
                });
            });
        })
    </script>

    </body>
    </html>
{{ end }}